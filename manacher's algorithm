#include <bits/stdc++.h>

int expand(int start, int end, string &str)
{
    while (start >= 0 && end < (int)str.size() && str[start] == str[end])
    {
        --start;
        ++end;
    }

    return (end - start - 1);
}

string manacherAlgo(string str)
{
    // Write your code here.
    int idx = 0;
    int len = 1;
    int n = (int)str.size();

    for (int i = 0; i < n; i++)
    {
        int len1 = expand(i, i, str);

        if (len1 > len)
        {
            idx = i - len1 / 2;
            len = len1;
        }

        int len2 = (i + 1 < n && str[i] == str[i + 1])? expand(i, i + 1, str) : 0;

        if (len2 > len)
        {
            idx = i - len2 / 2 + 1;
            len = len2;
        }
    }

    return str.substr(idx, len);
}
