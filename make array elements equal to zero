class Solution {
public:
    int countValidSelections(vector<int>& arr) {
        int count = 0;
        vector<int> prefix = {0};
        for (int x : arr) prefix.push_back(prefix.back() + x);

        for (int i = 0; i < arr.size(); i++)
        {
            if (arr[i]) continue;
            int diff = abs(prefix[arr.size()] - (prefix[i] << 1));

            if (diff < 2) count += 2 - diff;
        }

        return count;
    }
};
