#include <bits/stdc++.h>

vector<int> harderPuzzle(int n, vector<int>& arr)
{
    // Write your code here.
    vector<int> ans(n);
    vector<int> stack = {-1};

    for (int i = n - 1; i >= 0; i--)
    {
        while (stack.back() != -1 && arr[stack.back()] <= arr[i])
        {
            stack.pop_back();
        }

        if (stack.back() != -1) ans[i] = stack.back() - i;
        stack.push_back(i);
    }

    return ans;
}
