#include <bits/stdc++.h>

bitset<3005> visited;
unordered_set<int> sett[3005];

void dfs(int u, vector<vector<int> >& adj, unordered_set<int>& sett)
{
  visited[u] = 1;
  sett.insert(u);

  for (int v : adj[u])
  {
    if (!visited[v]) {
      dfs(v, adj, sett);
    }
  }
}

vector<bool> ninjaAcademy(int n, vector<vector<int> > prerequisite, vector<vector<int> > query) {
  // Write your code here.
  vector<vector<int> > adj(n);

  for (auto &p : prerequisite)
  {
    adj[p[0]].push_back(p[1]);
  }

  for (int u = 0; u < n; u++)
  {
    visited.reset();
    sett[u].clear();

    dfs(u, adj, sett[u]);
  }

  vector<bool> ans;
  ans.reserve((int)query.size());

  for (auto &q : query)
  {
    if (sett[q[0]].count(q[1])) {
      ans.push_back(true);
    }
    else
      ans.push_back(false);
  }

  return ans;
}
