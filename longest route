#include <bits/stdc++.h>

int ans;
bitset<13> visited[13];
int dirs[4][2] = {{-1, 0}, {0, 1}, {1, 0}, {0, -1}};

void track(int x, int y, int dx, int dy, int m, int n, int len, vector<vector<int> >& mat)
{
	if (x == dx && y == dy)
	{
		ans = max(len, ans);
		return;
	}

	visited[x][y] = 1;

	auto check = [&](int x, int y) {
		return (x >= 0 && x < m && y >= 0 && y < n && mat[x][y] && !visited[x][y]);
	};

	for (auto &d : dirs)
	{
		int nex = x + d[0];
		int ney = y + d[1];

		if (check(nex, ney)) {
			track(nex, ney, dx, dy, m, n, len + 1, mat);
		}
	}

	visited[x][y] = 0;
}

int longestPath(int m, int n, vector<vector<int>> &mat, int sx, int sy, int dx, int dy) {
	// Write your code here
	if (!mat[sx][sy]) {
		return -1;
	}

	for (int i = 0; i < m; i++)
	{
		visited[i].reset();
	}

	ans = -1;
	track(sx, sy, dx, dy, m, n, 0, mat);

	return ans;
}

