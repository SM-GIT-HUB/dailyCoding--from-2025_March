#include <bits/stdc++.h> 
int carnivalRides(int n, int k, vector<vector<int> >& rides) {
    // Write your code here.
    sort(rides.begin(), rides.end(), [](auto &a, auto &b) {
        return (a[1] < b[1]);
    });

    multiset<int> sett;
    for (int i = 0; i < k; i++) sett.insert(0);

    int ride = 0;

    for (auto &r : rides)
    {
        auto it = sett.upper_bound(r[0]);

        if (it == sett.begin()) {
            continue;
        }

        --it;
        ride++;

        sett.erase(it);
        sett.insert(r[1]);
    }

    return ride;
}
