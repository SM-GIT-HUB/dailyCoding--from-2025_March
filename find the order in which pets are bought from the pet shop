#include <bits/stdc++.h>

struct obj {
    int uid;
    int time;

    obj(int id, int t): uid(id), time(t) {}
};

vector<int> findOrder(vector<vector<int> > arr, int n) 
{
	// Write Your Code here
    queue<obj> dog;
    queue<obj> cat;

    int t = 0;
    vector<int> ans;

    for (auto &v : arr)
    {
        if (v[0] == 1)
        {
            int uid = v[1];
            int type = v[2];

            if (type == 0) {
                dog.emplace(uid, t++);
            }
            else
                cat.emplace(uid, t++);
        }
        else
        {
            int type = v[1];

            if (type == 0)
            {
                ans.push_back(dog.front().uid);
                dog.pop();
            }
            else if (type == 1)
            {
                ans.push_back(cat.front().uid);
                cat.pop();
            }
            else
            {
                if (!dog.size())
                {
                    ans.push_back(cat.front().uid);
                    cat.pop();
                }
                else if (!cat.size())
                {
                    ans.push_back(dog.front().uid);
                    dog.pop();
                }
                else if (dog.front().time < cat.front().time)
                {
                    ans.push_back(dog.front().uid);
                    dog.pop();
                }
                else
                {
                    ans.push_back(cat.front().uid);
                    cat.pop();
                }
            }
        }
    }

    return ans;
}
